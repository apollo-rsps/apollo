plugins {
    id "io.gitlab.arturbosch.detekt" version "1.0.0.RC8" apply(false)
}

def detektConfig = "${project.projectDir}/detekt.yml"

subprojects { subproj ->
    if (subproj.buildFile.exists()) {
        apply plugin: 'apollo-plugin'
        apply plugin: 'io.gitlab.arturbosch.detekt'

        detekt {
            profile("main") {
                input = "${subproj.projectDir}/src"
                config = detektConfig
            }
        }

        dependencies {
            implementation group: 'com.google.guava', name: 'guava', version: guavaVersion
        }
    }
}
